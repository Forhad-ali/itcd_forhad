{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ticket Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body class="bg-light">

<div class="container my-4" style="max-width: 80%;">

  <div class="card shadow-sm">
    <div class="card-header bg-white d-flex justify-content-between align-items-center">
      <h4 class="mb-0">ğŸ« Ticket Details</h4>
      <a href="{% url 'ticket_list' %}" class="btn btn-secondary btn-sm">â† Back to List</a>
    </div>

    <div class="card-body">
      <h5 class="fw-bold"><strong>Ticket Number:  </strong>{{ ticket.id }}</h5>
      <h5 class="fw-bold"><strong>Ticket Title:  </strong>{{ ticket.title }}</h5>
      <p><strong>Description:  </strong>{{ ticket.description }}</p>

      <ul class="list-group list-group-flush">
        <li class="list-group-item"><strong>Status:</strong>
          <span class="badge 
            {% if ticket.status == 'open' %}bg-warning text-dark
            {% elif ticket.status == 'in_progress' %}bg-info
            {% elif ticket.status == 'closed' %}bg-success
            {% endif %}">
            {{ ticket.get_status_display }}
          </span>
        </li>
        <li class="list-group-item"><strong>Assigned To:</strong> {{ ticket.assigned_to|default:"â€”" }}</li>
        <li class="list-group-item"><strong>Created By:</strong> {{ ticket.created_by }}</li>
        <li class="list-group-item"><strong>Created At:</strong> {{ ticket.created_at|date:"Y-m-d H:i" }}</li>
        <li class="list-group-item"><strong>Assigned At:</strong> {{ ticket.assigned_at|default:"â€”"|date:"Y-m-d H:i" }}</li>
        <li class="list-group-item"><strong>Closed At:</strong> {{ ticket.closed_at|default:"â€”"|date:"Y-m-d H:i" }}</li>
      </ul>
    </div>

    <div class="card-footer bg-white">
      {% if user.role in "admin manager staff" %}
      <a href="{% url 'ticket_update' ticket.id %}" class="btn btn-primary btn-sm">âœï¸ Edit</a>
      {% endif %}
      {% if user.role in "admin manager" %}
      <a href="{% url 'ticket_delete' ticket.id %}" class="btn btn-danger btn-sm">ğŸ—‘ï¸ Delete</a>
      {% endif %}
    </div>

  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
